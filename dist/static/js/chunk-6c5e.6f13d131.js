(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6c5e"],{"0oxk":function(e,t,a){},"6yQQ":function(e,t,a){"use strict";var r=a("0oxk");a.n(r).a},OqjG:function(e,t,a){"use strict";var r=a("y+4H");a.n(r).a},cyif:function(e,t,a){"use strict";a.r(t);var r=a("kdw4"),i=a("XJYT"),n={data:function(){return{acceptanceType:[{value:"",label:"全部类型"},{value:"FLATMONEYTOKEN",label:"法币兑GAC"},{value:"TOKENFLATMONEY",label:"GAC兑法币"}],fenrunHistoryVisible:!1,fenrunVisible:!1,acceptancetype:"",pickerdate:"",pickerdate1:"",tradingAccount:"",listQuery:{page:1,limit:10},tableKey:0,list:null,total:null,listLoading:!0,yijianfenrunVisible:!1,fenrunxqVisible:!1,orderid:"",acceptorPeople:"",acceptorAmount:"",fenrunTime:"",starttime:"",endtime:"",acceptorTotal:"",shouldAmount:"",accetualAmount:"",fenrunCatchVisible:!1,orderNum:"",start:"",end:"",acceptorName:"",maxTotal:"",fenAmount:"",dealWithRow:"",dealWithScope:"",acceptoryear:"",acceptorYear:[],timeperiod:"请选择要分润的时间段",timePeriod:[],historyyear:"",historyYear:[],historyperiod:"请选择要查询的时间段",historyPeriod:[]}},created:function(){this.getList()},watch:{acceptoryear:function(e){this.historyYear=[],this.selectTimer()},historyyear:function(e){this.historyYear=[],this.historyPeriodFun()}},methods:{setCatchClick:function(e,t){var a=this;Object(r.t)({id:e.id}).then(function(e){200===e.data.code?a.list[t.$index].acceptStatus="ABNORMAL":Object(i.Message)({message:e.data.message,type:"error",duration:5e3})})},handlefenrunDetail:function(e,t){var a=this;Object(r.m)({id:e.id}).then(function(e){200===e.data.code?(a.yijianfenrunVisible=!0,a.orderid=e.data.data.tradeId,a.acceptorPeople=e.data.data.accepterName,a.acceptorAmount=Number(e.data.data.accepteAmount/1e4).toFixed(2)||Number(0).toFixed(2),a.fenrunTime=e.data.data.benefitTime,a.starttime=e.data.data.benefitBeginTime,a.endtime=e.data.data.benefitEndTime,a.acceptorTotal=Number(e.data.data.benefitPerGAC).toFixed(2)||Number(0).toFixed(2),a.shouldAmount=Number(e.data.data.planBenefitAmount/1e4).toFixed(2)||Number(0).toFixed(2),a.accetualAmount=Number(e.data.data.shareBenefitAmount/1e4).toFixed(2)||Number(0).toFixed(2)):Object(i.Message)({message:e.data.message,type:"error",duration:5e3})})},handleRestartSureClick:function(){this.yijianfenrunVisible=!1},dealWithClick:function(e,t){var a=this;this.fenrunCatchVisible=!0,this.dealWithRow=e,this.dealWithScope=t,Object(r.m)({id:e.id}).then(function(t){200===t.data.code?(a.fenrunCatchVisible=!0,a.orderNum=e.tradeId,a.start=e.benefitBeginTime,a.end=e.benefitEndTime,a.acceptorName=e.accepterName,a.maxTotal=Number(e.planBenefitAmount/1e4).toFixed(2)||(0).toFixed(2),a.fenAmount=Number(e.shareBenefitAmount/1e4).toFixed(2)||(0).toFixed(2)):Object(i.Message)({message:t.data.message,type:"error",duration:5e3})})},catchDealClick:function(){var e=this;Object(r.h)({id:this.dealWithRow.id,benefitAmount:1e4*this.fenAmount}).then(function(t){200===t.data.code?(e.fenrunCatchVisible=!1,e.list[e.dealWithScope.$index].acceptStatus="SHARED"):Object(i.Message)({message:t.data.message,type:"error",duration:5e3})})},getList:function(){var e=this,t={accountName:this.tradingAccount,acceptType:this.acceptancetype,start:this.pickerdate,end:this.pickerdate1,pageNo:this.listQuery.page,pageSize:this.listQuery.limit};Object(r.o)(t).then(function(t){200===t.data.code?(e.list=t.data.data.rows,e.total=t.data.data.totalCount,e.listLoading=!1):(e.listLoading=!1,Object(i.Message)({message:t.data.message,type:"error",duration:5e3}))})},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},searchClick:function(){this.acceptorYear=[],this.timePeriod=[],this.historyYear=[],this.historyPeriod=[],this.listQuery.page=1,this.getList()},yijianfenrunClick:function(){var e=this;this.acceptorYear=[],this.fenrunVisible=!0,Object(r.s)().then(function(t){if(200===t.data.code){for(var a=0;a<t.data.data.length;a++)e.acceptorYear.push({value:t.data.data[a],label:t.data.data[a]});e.acceptoryear=t.data.data[0]}else Object(i.Message)({message:t.data.message,type:"error",duration:5e3})})},selectTimer:function(){var e=this;this.timePeriod=[],Object(r.r)({year:this.acceptoryear}).then(function(t){if(200===t.data.code)for(var a=0;a<t.data.data.length;a++)e.timePeriod.push({value:t.data.data[a],label:t.data.data[a]});else Object(i.Message)({message:t.data.message,type:"error",duration:5e3})})},checkHistoryClick:function(){var e=this;this.historyYear=[],this.fenrunHistoryVisible=!0,Object(r.q)().then(function(t){if(200===t.data.code){for(var a=0;a<t.data.data.length;a++)e.historyYear.push({value:t.data.data[a],label:t.data.data[a]});e.historyyear=t.data.data[0]}})},historyPeriodFun:function(){var e=this;this.historyPeriod=[],Object(r.p)({year:this.historyyear}).then(function(t){if(200===t.data.code)for(var a=0;a<t.data.data.length;a++)e.historyPeriod.push({value:t.data.data[a],label:t.data.data[a]});else Object(i.Message)({message:t.data.message,type:"error",duration:5e3})})},fenrunClickSure:function(){"请选择要查询的时间段"!==this.timeperiod?(this.fenrunVisible=!1,this.$router.push({path:"fenrun-detail/"+this.timeperiod})):Object(i.Message)({message:"请选择要分润时间段",type:"error",duration:3e3})},handleFenrun:function(){this.fenrunVisible=!0},historyClickSure:function(){"请选择要查询的时间段"!==this.historyperiod?(this.fenrunHistoryVisible=!1,this.$router.push({path:"history-fenrun/"+this.historyperiod})):Object(i.Message)({message:"请选择要查询时间段",type:"error",duration:3e3})}}},o=(a("OqjG"),a("6yQQ"),a("KHd+")),l=Object(o.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"fenrun"}},[a("div",{staticClass:"contaner-box"},[a("span",{staticClass:"box-spacing",staticStyle:{"margin-left":"0px"}},[e._v("\n            承兑类型：\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.acceptancetype,callback:function(t){e.acceptancetype=t},expression:"acceptancetype"}},e._l(e.acceptanceType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("span",{staticClass:"box-spacing"},[a("span",{staticClass:"demonstration"},[e._v("时间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始时间"},model:{value:e.pickerdate,callback:function(t){e.pickerdate=t},expression:"pickerdate"}}),e._v(" "),a("span",[e._v("至")]),e._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd 23:59:59",placeholder:"结束时间"},model:{value:e.pickerdate1,callback:function(t){e.pickerdate1=t},expression:"pickerdate1"}})],1),e._v(" "),a("span",{staticClass:"box-spacing"},[e._v("\n            承兑人："),a("el-input",{attrs:{placeholder:"请输入承兑人账户名",clearable:""},model:{value:e.tradingAccount,callback:function(t){e.tradingAccount=t},expression:"tradingAccount"}})],1),e._v(" "),a("span",{staticClass:"box-spacing"},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.checkHistoryClick}},[e._v("查看历史分润")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.yijianfenrunClick}},[e._v("分润")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.searchClick}},[e._v("查询")])],1)]),e._v(" "),a("div",{staticClass:"tab-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",width:"200",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.tradeId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"承兑人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.accepterName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"承兑金额（GAC）"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Number(t.row.accepteAmount/1e4).toFixed(2))+" GAC")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"承兑类型"},scopedSlots:e._u([{key:"default",fn:function(t){return["FLATMONEYTOKEN"===t.row.acceptType?a("span",[e._v("法币兑GAC")]):e._e(),e._v(" "),"TOKENFLATMONEY"===t.row.acceptType?a("span",[e._v("GAC兑法币")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["NOTSHARE"===t.row.acceptStatus?a("span",[e._v("未分润")]):e._e(),e._v(" "),"SHARED"===t.row.acceptStatus?a("span",[e._v("已分润")]):e._e(),e._v(" "),"ABNORMAL"===t.row.acceptStatus?a("span",{staticStyle:{color:"red"}},[e._v("异常")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"已分润金额(GAC)"},scopedSlots:e._u([{key:"default",fn:function(t){return["NOTSHARE"===t.row.acceptStatus?a("span",[e._v("--")]):e._e(),e._v(" "),"SHARED"===t.row.acceptStatus?a("span",[e._v(e._s(Number(t.row.shareBenefitAmount/1e4).toFixed(2))+" GAC")]):e._e(),e._v(" "),"ABNORMAL"===t.row.acceptStatus?a("span",[e._v("--")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"120px;","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return["NOTSHARE"===t.row.acceptStatus?a("el-button",{staticStyle:{width:"80px",margin:"0 15px 0 15px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.setCatchClick(t.row,t)}}},[e._v("设为异常")]):e._e(),e._v(" "),"SHARED"===t.row.acceptStatus?a("el-button",{staticStyle:{width:"80px",margin:"0 15px 0 15px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handlefenrunDetail(t.row,t)}}},[e._v("分润详情")]):e._e(),e._v(" "),"ABNORMAL"===t.row.acceptStatus&&t.row.shareBenefitAmount>0?a("el-button",{staticStyle:{width:"80px",margin:"0 15px 0 15px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.dealWithClick(t.row,t)}}},[e._v("处理")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"分润详情",visible:e.yijianfenrunVisible,width:"30%",id:"fenrunDetail"},on:{"update:visible":function(t){e.yijianfenrunVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm"},[a("el-form-item",{attrs:{label:"订单号："}},[a("span",[e._v(e._s(e.orderid))])]),e._v(" "),a("el-form-item",{attrs:{label:"承兑人："}},[a("span",[e._v(e._s(e.acceptorPeople)+" GAC")])]),e._v(" "),a("el-form-item",{attrs:{label:"承兑金额："}},[a("span",[e._v(e._s(e.acceptorAmount)+" GAC")])]),e._v(" "),a("el-form-item",{attrs:{label:"分润时间："}},[a("span",[e._v(e._s(e.fenrunTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"分润时间段："}},[a("span",[e._v(e._s(e.starttime)+" 至 "+e._s(e.endtime))])]),e._v(" "),a("el-form-item",{attrs:{label:"当期应分润总额 / 承兑总额："}},[a("span",[e._v(e._s(e.acceptorTotal)+" GAC")])]),e._v(" "),a("el-form-item",{attrs:{label:"应分润金额"}},[a("span",[e._v(e._s(e.shouldAmount)+" GAC")])]),e._v(" "),a("el-form-item",{attrs:{label:"实际分润金额"}},[a("span",[e._v(e._s(e.accetualAmount)+" GAC")])]),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:function(t){e.yijianfenrunVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleRestartSureClick("ruleForm")}}},[e._v("确定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"分润",visible:e.fenrunVisible,width:"30%"},on:{"update:visible":function(t){e.fenrunVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm"},[a("el-form-item",{attrs:{label:"年 份："}},[a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.acceptoryear,callback:function(t){e.acceptoryear=t},expression:"acceptoryear"}},e._l(e.acceptorYear,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"时间段："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.timeperiod,callback:function(t){e.timeperiod=t},expression:"timeperiod"}},e._l(e.timePeriod,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"15px"},on:{click:function(t){e.fenrunVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.fenrunClickSure}},[e._v("下一步")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看历史分润",visible:e.fenrunHistoryVisible,width:"30%"},on:{"update:visible":function(t){e.fenrunHistoryVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm"},[a("el-form-item",{attrs:{label:"年 份："}},[a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.historyyear,callback:function(t){e.historyyear=t},expression:"historyyear"}},e._l(e.historyYear,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{"marigin-top":"10px"},attrs:{label:"时间段："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.historyperiod,callback:function(t){e.historyperiod=t},expression:"historyperiod"}},e._l(e.historyPeriod,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"15px"},on:{click:function(t){e.fenrunHistoryVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.historyClickSure}},[e._v("查看")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"异常订单分润处理",visible:e.fenrunCatchVisible,width:"30%"},on:{"update:visible":function(t){e.fenrunCatchVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm"},[a("el-form-item",{attrs:{label:"订单号："}},[a("span",[e._v(e._s(e.orderNum))])]),e._v(" "),a("el-form-item",{attrs:{label:"时间："}},[a("span",[e._v(e._s(e.start)+" 至 "+e._s(e.end))])]),e._v(" "),a("el-form-item",{attrs:{label:"承兑人："}},[a("span",[e._v(e._s(e.acceptorName)+" GAC")])]),e._v(" "),a("el-form-item",{attrs:{label:"最大可分润金额："}},[a("span",[e._v(e._s(e.maxTotal))])]),e._v(" "),a("el-form-item",{attrs:{label:"分润金额"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.fenAmount,callback:function(t){e.fenAmount=t},expression:"fenAmount"}}),e._v(" "),a("div",{staticClass:"gac"},[e._v("GAC")])],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("span",{staticStyle:{color:"red",display:"inline-block","margin-left":"70px"}},[e._v("不可超过最大可分润金额")])]),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:function(t){e.fenrunCatchVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.catchDealClick("ruleForm")}}},[e._v("确定")])],1)],1)],1)],1)},[],!1,null,"1a94c664",null);l.options.__file="FenRun.vue";t.default=l.exports},kdw4:function(e,t,a){"use strict";a.d(t,"k",function(){return o}),a.d(t,"e",function(){return l}),a.d(t,"c",function(){return s}),a.d(t,"f",function(){return c}),a.d(t,"a",function(){return u}),a.d(t,"b",function(){return d}),a.d(t,"d",function(){return p}),a.d(t,"n",function(){return f}),a.d(t,"o",function(){return m}),a.d(t,"m",function(){return h}),a.d(t,"h",function(){return b}),a.d(t,"t",function(){return y}),a.d(t,"s",function(){return v}),a.d(t,"r",function(){return _}),a.d(t,"j",function(){return g}),a.d(t,"g",function(){return k}),a.d(t,"l",function(){return S}),a.d(t,"q",function(){return A}),a.d(t,"p",function(){return x}),a.d(t,"i",function(){return C});var r=a("t3Un"),i=a("Qyje"),n=a.n(i);function o(e){return Object(r.a)({url:"accepter/apply/list",method:"get",params:e})}function l(e){return Object(r.a)({url:"accepter/apply/review",method:"post",data:n.a.stringify(e)})}function s(e){return Object(r.a)({url:"accepter/list",method:"get",params:e})}function c(e){return Object(r.a)({url:"accepter/update",method:"post",data:n.a.stringify(e)})}function u(e){return Object(r.a)({url:"accepter/alterStatus",method:"post",data:n.a.stringify(e)})}function d(e){return Object(r.a)({url:"accepter/delete",method:"post",params:e})}function p(e){return Object(r.a)({url:"accepter/punish",method:"post",data:n.a.stringify(e)})}function f(e){return Object(r.a)({url:"manager/tradeBill/queryTradeBill",method:"get",params:e})}function m(e){return Object(r.a)({url:"manager/autoShareProfit/queryShareBenefit",method:"get",params:e})}function h(e){return Object(r.a)({url:"manager/autoShareProfit/queryBenefitDetail",method:"get",params:e})}function b(e){return Object(r.a)({url:"manager/autoShareProfit/confirmExceptionBenefit",method:"post",data:n.a.stringify(e)})}function y(e){return Object(r.a)({url:"manager/autoShareProfit/updateExceptStatus",method:"post",data:n.a.stringify(e)})}function v(){return Object(r.a)({url:"manager/autoShareProfit/selectUnBenefitYear",method:"get"})}function _(e){return Object(r.a)({url:"manager/autoShareProfit/selectUnBenefitPeriods",method:"get",params:e})}function g(e){return Object(r.a)({url:"manager/autoShareProfit/confirmSelectUnBenefitPeriods",method:"post",data:n.a.stringify(e)})}function k(e){return Object(r.a)({url:"manager/autoShareProfit/confirmBenefitAction",method:"get",params:e})}function S(e){return Object(r.a)({url:"manager/autoShareProfit/queryAccepterBenefitDetail",method:"get",params:e})}function A(){return Object(r.a)({url:"manager/autoShareProfit/selectHistoryBenefitYear",method:"get"})}function x(e){return Object(r.a)({url:"manager/autoShareProfit/selectHistoryBenefitPeriods",method:"get",params:e})}function C(e){return Object(r.a)({url:"manager/autoShareProfit/confirmSelectHistoryBenefitPeriods",method:"post",data:n.a.stringify(e)})}},"y+4H":function(e,t,a){}}]);