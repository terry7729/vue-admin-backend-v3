(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-bc4d"],{DkQe:function(e,t,a){"use strict";a.r(t);var i=a("NNgB"),n=a("X4fA"),s=a("XJYT"),r={data:function(){return{loginname:n.a.fetch("loginParam").accountname,searchName:"",saveId:"",savename:"",saveaccountname:"",savescope:"",tableKey:0,list:null,total:null,listLoading:!0,listQuery:{page:1,limit:10},options:[{value:"MANAGER",label:"管理员"},{value:"CUSTOM_SERVICE",label:"客服"}],value:"",dialogVisible:!1,deleteDialogVisible:!1,resetDialogVisible:!1,enabledDialogVisible:!1,ruleForm:{accountname:"",username:"",password:"",permissions:""},rules:{accountname:[{required:!0,message:"请输入4~12位英文账号",trigger:"blur",validator:function(e,t,a){/^[a-z|A-Z|0-9|\-|_|\.]{4,12}/g.test(t)?a():a(new Error("请输入4~12位英文账号"))}},{min:4,max:12,message:"请输入4~12位英文帐号",trigger:"blur"}],username:[{required:!0,message:"请输入中文姓名",trigger:"blur",validator:function(e,t,a){/[\u4e00-\u9fa5]{2,8}/.test(t)?a():a(new Error("请输入中文姓名"))}},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(i.f)({accountname:this.searchName,pageNo:this.listQuery.page,pageSize:this.listQuery.limit}).then(function(t){200===t.data.code?(e.list=t.data.data.content,e.total=t.data.data.totalElements,setTimeout(function(){e.listLoading=!1},100)):(e.listLoading=!1,Object(s.Message)({message:t.data.message,type:"error",duration:5e3}))})},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleUpdate:function(e){},handleDisableClick:function(e,t){this.savescope=t,this.saveId=e.id,this.savename=e.username,this.saveaccountname=e.accountname,this.deleteDialogVisible=!0},disabledClickSure:function(){var e=this,t=this;Object(i.c)({id:this.saveId}).then(function(a){200===a.data.code?t.list[t.savescope.$index].status="DELETE":(e.listLoading=!1,Object(s.Message)({message:a.data.message,type:"error",duration:5e3}))}),this.deleteDialogVisible=!1},handleEnableClick:function(e,t){this.savescope=t,this.saveId=e.id,this.savename=e.username,this.saveaccountname=e.accountname,this.enabledDialogVisible=!0},enabledClickSure:function(){var e=this,t=this;Object(i.d)({id:this.saveId}).then(function(a){200===a.data.code?t.list[t.savescope.$index].status="SURVIVE":(e.listLoading=!1,Object(s.Message)({message:a.data.message,type:"error",duration:5e3}))}),this.enabledDialogVisible=!1},handleReset:function(e){this.saveId=e.id,this.resetDialogVisible=!0},handleAdd:function(){this.dialogVisible=!0},hacdleResetPasswordClick:function(){var e=this;Object(i.j)({id:this.saveId}).then(function(t){200===t.data.code?Object(s.Message)({message:"密码重置成功",type:"success",duration:3e3}):(e.listLoading=!1,Object(s.Message)({message:t.data.message,type:"error",duration:5e3}))}),this.resetDialogVisible=!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;var n={role:t.value||"MANAGER",password:t.ruleForm.password||"123456",accountname:t.ruleForm.accountname,username:t.ruleForm.username};Object(i.b)(n).then(function(a){200===a.data.code?(t.getList(),t.$refs[e].resetFields(),t.dialogVisible=!1,Object(s.Message)({message:"添加账户成功",type:"success",duration:3e3})):(t.listLoading=!1,Object(s.Message)({message:a.data.message,type:"error",duration:5e3}))})})},handleSearchClick:function(){this.listQuery.page=1,this.getList()},resetForm:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1}}},l=(a("H8n2"),a("KHd+")),o=Object(l.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"contaner-box"},[a("span",{staticClass:"box-spacing"},[a("el-input",{attrs:{placeholder:"请输入账户名",clearable:""},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleSearchClick}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("添加")])],1)]),e._v(" "),a("div",{staticClass:"tab-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.accountname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.username))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"权限"},scopedSlots:e._u([{key:"default",fn:function(t){return["SUPER_ADMIN"===t.row.role?a("span",[e._v("超级管理员")]):e._e(),e._v(" "),"MANAGER"===t.row.role?a("span",[e._v("管理员")]):e._e(),e._v(" "),"CUSTOM_SERVICE"===t.row.role?a("span",[e._v("客服")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["SURVIVE"===t.row.status?a("span",[e._v("正常")]):e._e(),e._v(" "),"DELETE"===t.row.status?a("span",{staticStyle:{color:"red"}},[e._v("禁用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ctime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.accountname!==e.loginname?a("div",["SUPER_ADMIN"===t.row.role?a("div",[a("label",[e._v("系统账户")])]):"SURVIVE"===t.row.status?a("div",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleDisableClick(t.row,t)}}},[e._v("禁用")]),e._v(" "),a("el-button",{staticStyle:{width:"70px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleReset(t.row)}}},[e._v("重置密码")])],1):"DELETE"===t.row.status?a("div",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleEnableClick(t.row,t)}}},[e._v("启用")]),e._v(" "),a("el-button",{staticStyle:{width:"70px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleReset(t.row)}}},[e._v("重置密码")])],1):e._e()]):a("div",[a("label",[e._v("当前账户")])])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加账户",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账号",prop:"accountname"}},[a("el-input",{staticStyle:{width:"100%","margin-left":"0px"},attrs:{minlength:"6",maxlength:"12",placeholder:"请输入4~12位帐号"},model:{value:e.ruleForm.accountname,callback:function(t){e.$set(e.ruleForm,"accountname",t)},expression:"ruleForm.accountname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{staticStyle:{width:"100%","margin-left":"0px"},attrs:{placeholder:"请输入姓名",minlength:"2",maxlength:"8"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{staticStyle:{width:"100%","margin-left":"0px"},attrs:{maxlength:"6",type:"password",placeholder:"默认123456"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限",prop:"permissions"}},[a("el-select",{staticStyle:{width:"100%","margin-left":"0px"},attrs:{placeholder:"管理员"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"30%"},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[a("span",[e._v("确定要禁用账户"+e._s(e.saveaccountname)+"("+e._s(e.savename)+")吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.disabledClickSure}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.enabledDialogVisible,width:"30%"},on:{"update:visible":function(t){e.enabledDialogVisible=t}}},[a("span",[e._v("确定要启用账户"+e._s(e.saveaccountname)+"("+e._s(e.savename)+")吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.enabledDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.enabledClickSure}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.resetDialogVisible,width:"30%"},on:{"update:visible":function(t){e.resetDialogVisible=t}}},[a("span",[e._v("确定要重置该账户密码为123456吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.hacdleResetPasswordClick}},[e._v("确 定")])],1)])],1)},[],!1,null,"5ae70638",null);o.options.__file="accManage.vue";t.default=o.exports},H8n2:function(e,t,a){"use strict";var i=a("VvfZ");a.n(i).a},NNgB:function(e,t,a){"use strict";a.d(t,"h",function(){return r}),a.d(t,"f",function(){return l}),a.d(t,"c",function(){return o}),a.d(t,"d",function(){return c}),a.d(t,"b",function(){return u}),a.d(t,"j",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"k",function(){return g}),a.d(t,"i",function(){return p}),a.d(t,"l",function(){return f}),a.d(t,"g",function(){return b}),a.d(t,"e",function(){return v});var i=a("t3Un"),n=a("Qyje"),s=a.n(n);function r(e){return Object(i.a)({url:"trade/list",method:"get",params:e})}function l(e){return Object(i.a)({url:"manager/queryAccount",method:"get",params:e})}function o(e){return Object(i.a)({url:"manager/ApiImplicitParam",method:"post",data:s.a.stringify(e)})}function c(e){return Object(i.a)({url:"manager/initiateAccount",method:"post",data:s.a.stringify(e)})}function u(e){return Object(i.a)({url:"manager/createAccount",method:"post",data:s.a.stringify(e)})}function d(e){return Object(i.a)({url:"manager/changepasswd",method:"post",data:s.a.stringify(e)})}function m(e){return Object(i.a)({url:"trade/cancel?tradeId="+e.tradeId+"&tradeType="+e.tradeType+"&accepterName="+e.accepterName+"&ordinaryName="+e.ordinaryName,method:"post"})}function g(e){return Object(i.a)({url:"trade/reassignment",method:"post",data:s.a.stringify(e)})}function p(e){return Object(i.a)({url:"trade/reboot",method:"post",data:s.a.stringify(e)})}function f(e){return Object(i.a)({url:"trade/unfreezeAccepterGAC",method:"post",data:s.a.stringify(e)})}function b(e){return Object(i.a)({url:"log/list",method:"get",params:e})}function v(e){return Object(i.a)({url:"manager/trade/getAccepterTradeInfo",method:"get",params:e})}},VvfZ:function(e,t,a){}}]);