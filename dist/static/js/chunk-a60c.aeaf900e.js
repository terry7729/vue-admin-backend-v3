(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a60c"],{"/r2w":function(e,t,a){"use strict";a.r(t);var r=a("NNgB"),i=a("XJYT"),n=a("7Qib"),s={data:function(){return{waitDialogVisible:!1,pickerdate:"",pickerdate1:"",tableKey:0,list:null,total:null,totallist:null,listLoading:!0,odertype:"",orderstate:"",accountname:"",acceptorname:"",orderid:"",username:"",accepterusernmae:"",accepterId:"",accepter:"",cancelDialogVisible:!1,resartdialogVisible:!1,orderdialogVisible:!1,dialogVisible:!1,bankAccepter:"",bankGetType:"",bankGetCard:"",bankUserName:"",bankName:"",bankBranch:"",bankType:"",bankTypeCard:"",payDialogVisible:!1,payAccepter:"",payGetType:"",payGetCard:"",payAccount:"",payType:"",payUserName:"",saveRow:{},saveScope:{},setTime:{timer:null},listQuery:{page:1,limit:10},ruleForm:{accountName:""},rules:{accountName:[{required:!0,message:"请输入6~12位帐号",trigger:"blur"},{min:6,max:12,message:"请输入6~12位帐号",trigger:"blur"}]},orderType:[{value:"",label:"全部"},{value:"WAIT_PAY",label:"等待付款"},{value:"PAYED",label:"已付款"},{value:"CANCEL",label:"取消付款"},{value:"FINISH",label:"完成付款"}],orderState:[{value:"",label:"全部"},{value:"ACTIVE_BUY",label:"买入"},{value:"ACTIVE_SELL",label:"卖出"}]}},created:function(){var e=this;this.getList(),this.setTime.timer=setInterval(function(){e.getTimetotal()},5e3)},watch:{totallist:function(e,t){null!==t&&e>t&&Object(n.c)("你有新订单","order")}},beforeDestroy:function(){clearInterval(this.setTime.timer),this.setTime.timer=null},methods:{handleFreezonClick:function(e,t){var a=this,n={tradeId:e.tradeId};Object(r.l)(n).then(function(e){200===e.data.code?a.list[t.$index].tradeStatus=2:Object(i.Message)({message:e.data.message,type:"error",duration:5e3})})},checkAcceptorInfor:function(e){var t=this;Object(r.e)({tradeId:e.tradeId}).then(function(a){if(200===a.data.code){if("ACTIVE_BUY"===e.tradeType){if("CANCEL"===e.tradeStatus)return;"BANK_CARD"===e.payWay?(t.bankType="收款方式",t.bankTypeCard="收款银行卡",t.bankAccepter=a.data.data.publish,t.bankGetType="银行转账",t.bankGetCard=a.data.data.payInfo.receiveAccount,t.bankUserName=a.data.data.payInfo.receiveName,t.bankName=a.data.data.payInfo.receiveBank,t.bankBranch=a.data.data.payInfo.bankName,t.dialogVisible=!0):"ALIPAY"===e.payWay&&(t.payType="收款方式",t.payAccount="支付宝账号",t.payAccepter=a.data.data.publish,t.payGetType="支付宝",t.payGetCard=a.data.data.payInfo.receiveAccount,t.payUserName=a.data.data.payInfo.receiveName,t.payDialogVisible=!0)}}else Object(i.Message)({message:a.data.message,type:"error",duration:5e3})})},getTimetotal:function(){var e=this,t={accepterName:this.acceptorname,accountName:this.accountname,endDate:this.pickerdate1.substring(0,10),pageNo:this.listQuery.page,pageSize:this.listQuery.limit,startDate:this.pickerdate.substring(0,10),status:this.odertype,tradeType:this.orderstate,tradeId:this.orderid};Object(r.h)(t).then(function(t){200===t.data.code&&(e.totallist=t.data.data.totalElements)})},getList:function(){var e=this;this.listLoading=!0;var t={accepterName:this.acceptorname,accountName:this.accountname,endDate:this.pickerdate1.substring(0,10),pageNo:this.listQuery.page,pageSize:this.listQuery.limit,startDate:this.pickerdate.substring(0,10),status:this.odertype,tradeType:this.orderstate,tradeId:this.orderid};Object(r.h)(t).then(function(t){200===t.data.code?(e.list=t.data.data.list,e.total=t.data.data.total,e.totallist=t.data.data.pages,setTimeout(function(){e.listLoading=!1},100)):(e.listLoading=!1,Object(i.Message)({message:t.data.message,type:"error",duration:5e3}))}).catch(function(e){})},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},searchClick:function(){this.listQuery.page=1,this.getList()},resetClick:function(){this.odertype="",this.orderstate="",this.pickerdate="",this.accountname="",this.acceptorname="",this.orderid="",this.pickerdate1=""},handleResart:function(e,t){this.saveRow=e,this.saveScope=t,this.resartdialogVisible=!0},handleRestartSureClick:function(e){/^[1-5a-z][a-z1-5]{5,12}$/.test(this.ruleForm.accountName)&&""!==this.ruleForm.accountName?(this.resartdialogVisible=!1,this.orderdialogVisible=!0,this.username=this.saveRow.publish,this.accepterusernmae=this.ruleForm.accountName,this.ruleForm.accountName="",this.accepterId=this.saveRow.tradeId):new Error("请输入6~12位帐号")},resartdialogClick:function(e){this.resartdialogVisible=!1,this.ruleForm.accountName=""},handleOrderSureClick:function(){var e=this;Object(r.k)({tradeId:this.accepterId,accountname:this.accepterusernmae}).then(function(t){200===t.data.code?(e.orderdialogVisible=!1,e.list[e.savescope.$index].consumer=t.data.data,Object(i.Message)({message:"重新分配订单成功",type:"success",duration:3e3})):(e.listLoading=!1,Object(i.Message)({message:t.data.message,type:"error",duration:5e3}))})},dialogPrevisibleClick:function(e){this.resartdialogVisible=!0,this.orderdialogVisible=!1},handleCancelClick:function(e,t){this.saveRow=e,this.saveScope=t,this.cancelDialogVisible=!0},handleRestartClick:function(e,t){var a=this;Object(r.i)({tradeId:e.tradeId}).then(function(e){200===e.data.code?(a.cancelDialogVisible=!1,a.list[t.$index].tradeStatus=2,Object(i.Message)({message:"重启订单成功",type:"success",duration:3e3})):Object(i.Message)({message:e.data.message,type:"error",duration:5e3})})},disabledClickCancel:function(){var e=this,t=this;Object(r.a)({tradeId:t.saveRow.tradeId,tradeType:t.saveRow.tradeType,accepterName:t.saveRow.accepterName,ordinaryName:t.saveRow.fastSubName}).then(function(a){console.log(a,"=====res.data====="),200===a.data.code?(e.cancelDialogVisible=!1,t.list[t.saveScope.$index].tradeStatus="CANCEL",Object(i.Message)({message:"取消订单成功",type:"success",duration:3e3}),t.getList()):(e.listLoading=!1,Object(i.Message)({message:a.data.message,type:"error",duration:5e3}))})}}},l=(a("htoC"),a("KHd+")),o=Object(l.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"contaner-box"},[a("span",{staticClass:"box-spacing",staticStyle:{"margin-left":"0px"}},[e._v("\n          订单类型：\n          "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.odertype,callback:function(t){e.odertype=t},expression:"odertype"}},e._l(e.orderType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("span",{staticClass:"box-spacing"},[e._v("\n          订单状态：\n          "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.orderstate,callback:function(t){e.orderstate=t},expression:"orderstate"}},e._l(e.orderState,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("span",{staticClass:"box-spacing"},[a("span",{staticClass:"demonstration"},[e._v("订单时间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始时间"},model:{value:e.pickerdate,callback:function(t){e.pickerdate=t},expression:"pickerdate"}}),e._v(" "),a("span",[e._v("至")]),e._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd 23:59:59",placeholder:"结束时间"},model:{value:e.pickerdate1,callback:function(t){e.pickerdate1=t},expression:"pickerdate1"}})],1)]),e._v(" "),a("div",{staticStyle:{margin:"15px 0 15px 10px",overflow:"hidden"}},[a("span",{staticClass:"box-spacing"},[e._v("\n        发起用户："),a("el-input",{attrs:{placeholder:"请输入账户名",clearable:""},model:{value:e.accountname,callback:function(t){e.accountname=t},expression:"accountname"}})],1),e._v(" "),a("span",{staticClass:"box-spacing"},[e._v("\n        承兑人："),a("el-input",{attrs:{placeholder:"请输入承兑人",clearable:""},model:{value:e.acceptorname,callback:function(t){e.acceptorname=t},expression:"acceptorname"}})],1),e._v(" "),a("span",{staticClass:"box-spacing"},[e._v("\n        订单号："),a("el-input",{attrs:{placeholder:"请输入订单号",clearable:""},model:{value:e.orderid,callback:function(t){e.orderid=t},expression:"orderid"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.searchClick}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.resetClick}},[e._v("重置")])],1)]),e._v(" "),a("div",{staticClass:"tab-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.tradeId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return["ACTIVE_BUY"===t.row.tradeType?a("span",[e._v("买入GAC")]):e._e(),e._v(" "),"ACTIVE_SELL"===t.row.tradeType?a("span",[e._v("卖出GAC")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.tradeStatus&&"ACTIVE_BUY"===t.row.tradeType?a("span",[e._v("待付款")]):e._e(),e._v(" "),2===t.row.tradeStatus&&"ACTIVE_SELL"===t.row.tradeType?a("span",[e._v("待收款")]):e._e(),e._v(" "),201===t.row.tradeStatus?a("span",[e._v("匹配失败")]):e._e(),e._v(" "),3===t.row.tradeStatus?a("span",[e._v("已付款")]):e._e(),e._v(" "),202===t.row.tradeStatus?a("span",[0===t.row.cancelType?a("span",[e._v("\n                  用户取消已解冻\n                ")]):e._e(),e._v(" "),1===t.row.cancelType?a("span",[e._v("\n                  系统自动取消已解冻\n                ")]):e._e(),e._v(" "),2===t.row.cancelType?a("span",[e._v("\n                  运营人员取消已解冻\n                ")]):e._e()]):e._e(),e._v(" "),203===t.row.tradeStatus?a("span",[0===t.row.cancelType?a("span",[e._v("\n                  用户取消未解冻\n                ")]):e._e(),e._v(" "),1===t.row.cancelType?a("span",[e._v("\n                  系统自动取消未解冻\n                ")]):e._e(),e._v(" "),2===t.row.cancelType?a("span",[e._v("\n                  运营人员取消未解冻\n                ")]):e._e()]):e._e(),e._v(" "),4===t.row.tradeStatus?a("span",[e._v("已完成")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发起用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.fastSubName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"承兑人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){e.checkAcceptorInfor(t.row)}}},[e._v(e._s(t.row.accepterName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量(GAC)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Number(t.row.userGac/1e4).toFixed(2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单价(CNY)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Number(t.row.fundPrice).toFixed(2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"交易额(CNY)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Number(t.row.transactionAmount/1e4).toFixed(2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.applyTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"220px;",label:"操作","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.tradeStatus?a("div",[a("el-button",{staticStyle:{width:"80px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleCancelClick(t.row,t)}}},[e._v("取消订单")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleResart(t.row,t)}}},[e._v("重新分配承兑人")])],1):e._e(),e._v(" "),4===t.row.tradeStatus?a("div"):e._e(),e._v(" "),3===t.row.tradeStatus?a("div",[a("el-button",{staticStyle:{width:"80px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleCancelClick(t.row,t)}}},[e._v("取消订单")])],1):e._e(),e._v(" "),203===t.row.tradeStatus?a("div",[a("el-button",{staticStyle:{width:"80px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleRestartClick(t.row,t)}}},[e._v("重启订单")])],1):e._e(),e._v(" "),203===t.row.tradeStatus?a("div",[a("el-button",{staticStyle:{width:"100px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleFreezonClick(t.row,t)}}},[e._v("解除承兑冻结")])],1):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.cancelDialogVisible,width:"30%"},on:{"update:visible":function(t){e.cancelDialogVisible=t}}},[a("span",[e._v("确定要取消该订单吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.disabledClickCancel}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"重新分配",visible:e.resartdialogVisible,width:"30%"},on:{"update:visible":function(t){e.resartdialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账户",prop:"accountName"}},[a("el-input",{staticStyle:{width:"100%","margin-left":"0px"},attrs:{placeholder:"请输入账户名"},model:{value:e.ruleForm.accountName,callback:function(t){e.$set(e.ruleForm,"accountName",t)},expression:"ruleForm.accountName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.resartdialogClick("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleRestartSureClick("ruleForm")}}},[e._v("下一步")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"重新分配",visible:e.orderdialogVisible,width:"30%"},on:{"update:visible":function(t){e.orderdialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账户名："}},[a("span",[e._v(e._s(e.username))])]),e._v(" "),a("el-form-item",{attrs:{label:"承兑人姓名："}},[a("span",[e._v(e._s(e.accepterusernmae))])]),e._v(" "),a("div",{staticStyle:{padding:"0 0 25px 15px"}},[e._v("\n            确定将订单"+e._s(e.accepterId)+"重新分配给该承兑人？\n       ")]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleOrderSureClick}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogPrevisibleClick("ruleForm")}}},[e._v("上一步")]),e._v(" "),a("el-button",{on:{click:function(t){e.orderdialogVisible=!1}}},[e._v("取 消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"承兑人"}},[a("span",[e._v(e._s(e.bankAccepter))])]),e._v(" "),a("el-form-item",{attrs:{label:e.bankType}},[a("span",[e._v(e._s(e.bankGetType))])]),e._v(" "),a("el-form-item",{attrs:{label:e.bankTypeCard}},[a("span",[e._v(e._s(e.bankGetCard))])]),e._v(" "),a("el-form-item",{attrs:{label:"持卡人姓名"}},[a("span",[e._v(e._s(e.bankUserName))])]),e._v(" "),a("el-form-item",{attrs:{label:"开户银行",prop:"sellfee"}},[a("span",[e._v(e._s(e.bankName))])]),e._v(" "),a("el-form-item",{attrs:{label:"开户支行",prop:"sellfee"}},[a("span",[e._v(e._s(e.bankBranch))])])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.waitDialogVisible,width:"30%"},on:{"update:visible":function(t){e.waitDialogVisible=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"承兑人"}},[a("span",[e._v(e._s(e.accepter))]),e._v(" "),a("div",{staticStyle:{color:"red","margin-left":"-50px"}},[e._v("承兑人还未付款")])])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.payDialogVisible,width:"30%"},on:{"update:visible":function(t){e.payDialogVisible=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"承兑人"}},[a("span",[e._v(e._s(e.payAccepter))])]),e._v(" "),a("el-form-item",{attrs:{label:e.payType}},[a("span",[e._v(e._s(e.payGetType))])]),e._v(" "),a("el-form-item",{attrs:{label:"姓名(支付宝)"}},[a("span",[e._v(e._s(e.payGetCard))])]),e._v(" "),a("el-form-item",{attrs:{label:e.payAccount}},[a("span",[e._v(e._s(e.payUserName))])])],1)],1)],1)},[],!1,null,"4d6fef24",null);o.options.__file="orderManage.vue";t.default=o.exports},NNgB:function(e,t,a){"use strict";a.d(t,"h",function(){return s}),a.d(t,"f",function(){return l}),a.d(t,"c",function(){return o}),a.d(t,"d",function(){return c}),a.d(t,"b",function(){return d}),a.d(t,"j",function(){return u}),a.d(t,"a",function(){return p}),a.d(t,"k",function(){return m}),a.d(t,"i",function(){return b}),a.d(t,"l",function(){return v}),a.d(t,"g",function(){return _}),a.d(t,"e",function(){return f});var r=a("t3Un"),i=a("Qyje"),n=a.n(i);function s(e){return Object(r.a)({url:"trade/list",method:"get",params:e})}function l(e){return Object(r.a)({url:"manager/queryAccount",method:"get",params:e})}function o(e){return Object(r.a)({url:"manager/ApiImplicitParam",method:"post",data:n.a.stringify(e)})}function c(e){return Object(r.a)({url:"manager/initiateAccount",method:"post",data:n.a.stringify(e)})}function d(e){return Object(r.a)({url:"manager/createAccount",method:"post",data:n.a.stringify(e)})}function u(e){return Object(r.a)({url:"manager/changepasswd",method:"post",data:n.a.stringify(e)})}function p(e){return Object(r.a)({url:"trade/cancel?tradeId="+e.tradeId+"&tradeType="+e.tradeType+"&accepterName="+e.accepterName+"&ordinaryName="+e.ordinaryName,method:"post"})}function m(e){return Object(r.a)({url:"trade/reassignment",method:"post",data:n.a.stringify(e)})}function b(e){return Object(r.a)({url:"trade/reboot",method:"post",data:n.a.stringify(e)})}function v(e){return Object(r.a)({url:"trade/unfreezeAccepterGAC",method:"post",data:n.a.stringify(e)})}function _(e){return Object(r.a)({url:"log/list",method:"get",params:e})}function f(e){return Object(r.a)({url:"manager/trade/getAccepterTradeInfo",method:"get",params:e})}},QrA7:function(e,t,a){},htoC:function(e,t,a){"use strict";var r=a("QrA7");a.n(r).a}}]);